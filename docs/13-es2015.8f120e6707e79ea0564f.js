(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{WzW6:function(e,t,i){"use strict";i.r(t),i.d(t,"LoginModule",function(){return te});var r=i("sYmb"),a=i("5HBU"),n=i("tyNb"),o=i("3Pt+"),c=i("PVWW"),s=i("JthR"),l=i("LhcL"),p=i("UnRD"),h=i("fXoL"),m=i("400s"),d=i("+VQX"),u=i("dTU2"),g=i("DD7I"),f=i("hLwh"),b=i("ofXK"),w=(i("LRne"),i("2Vo4"),i("XNiG"));const x=new h.y("recaptcha-language"),v=new h.y("recaptcha-base-url"),S=new h.y("recaptcha-nonce-tag");new h.y("recaptcha-settings");const k=new h.y("recaptcha-v3-site-key");let y=(()=>{let e=class{constructor(e,t,i,r,a){this.onLoadComplete=e=>{this.grecaptcha=e,this.actionBacklog&&this.actionBacklog.length>0&&(this.actionBacklog.forEach(([e,t])=>this.executeActionWithSubject(e,t)),this.actionBacklog=void 0)},this.zone=e,this.isBrowser=Object(b.A)(i),this.siteKey=t,this.nonce=a,this.baseUrl=r,this.init()}get onExecute(){return this.onExecuteSubject||(this.onExecuteSubject=new w.a,this.onExecuteObservable=this.onExecuteSubject.asObservable()),this.onExecuteObservable}execute(e){const t=new w.a;return this.isBrowser&&(this.grecaptcha?this.executeActionWithSubject(e,t):(this.actionBacklog||(this.actionBacklog=[]),this.actionBacklog.push([e,t]))),t.asObservable()}executeActionWithSubject(e,t){this.zone.runOutsideAngular(()=>{this.grecaptcha.execute(this.siteKey,{action:e}).then(i=>{this.zone.run(()=>{t.next(i),t.complete(),this.onExecuteSubject&&this.onExecuteSubject.next({action:e,token:i})})})})}init(){this.isBrowser&&("grecaptcha"in window?this.grecaptcha=grecaptcha:function(e,t,i,r,a){window.ng2recaptchaloaded=()=>{t(grecaptcha)};const n=document.createElement("script");n.innerHTML="",n.src=`${r||"https://www.google.com/recaptcha/api.js"}?render=${e}&onload=ng2recaptchaloaded`,a&&(n.nonce=a),n.async=!0,n.defer=!0,document.head.appendChild(n)}(this.siteKey,this.onLoadComplete,0,this.baseUrl,this.nonce))}};return e.\u0275fac=function(t){return new(t||e)(h.mc(h.J),h.mc(k),h.mc(h.M),h.mc(v,8),h.mc(S,8))},e.\u0275prov=h.Yb({token:e,factory:function(t){return e.\u0275fac(t)}}),e=Object(f.__decorate)([Object(f.__param)(1,Object(h.v)(k)),Object(f.__param)(2,Object(h.v)(h.M)),Object(f.__param)(3,Object(h.K)()),Object(f.__param)(3,Object(h.v)(v)),Object(f.__param)(4,Object(h.K)()),Object(f.__param)(4,Object(h.v)(S)),Object(f.__metadata)("design:paramtypes",[h.J,String,Object,String,String])],e),e})(),j=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.ac({type:e}),e.\u0275inj=h.Zb({providers:[y]}),e})();var B=i("p4AF"),E=i("gPJw"),O=i("B9zo"),Q=i("XiUz"),L=i("znSr"),C=i("7h/2"),_=i("EwFO"),A=i("kmnG"),q=i("qFsG"),z=i("NFeN"),M=i("bTqV"),I=i("bSwM");const V=["captchaRef"];function T(e,t){1&e&&(h.ic(0,"mat-error"),h.bd(1),h.vc(2,"translate"),h.hc()),2&e&&(h.Qb(1),h.dd(" ",h.wc(2,1,"authentification.required")," "))}function R(e,t){1&e&&(h.ic(0,"mat-error"),h.bd(1),h.vc(2,"translate"),h.hc()),2&e&&(h.Qb(1),h.dd(" ",h.wc(2,1,"authentification.emailNoVliade")," "))}function Z(e,t){1&e&&(h.ic(0,"mat-error"),h.bd(1),h.vc(2,"translate"),h.hc()),2&e&&(h.Qb(1),h.dd(" ",h.wc(2,1,"authentification.required")," "))}function G(e,t){1&e&&(h.ic(0,"mat-error"),h.bd(1),h.vc(2,"translate"),h.hc()),2&e&&(h.Qb(1),h.dd(" ",h.wc(2,1,"authentification.pwdLength")," "))}function N(e,t){if(1&e&&(h.ic(0,"mat-error",19),h.bd(1),h.vc(2,"translate"),h.vc(3,"translate"),h.hc()),2&e){const e=h.uc();h.Qb(1),h.fd(" ",h.wc(2,3,"authentification.remain")," ",e.index," ",h.wc(3,5,"authentification.attempts")," ")}}function W(e,t){if(1&e&&(h.ic(0,"mat-error",19),h.bd(1),h.vc(2,"translate"),h.vc(3,"translate"),h.hc()),2&e){const e=h.uc();h.Qb(1),h.fd(" ",h.wc(2,3,"authentification.remain")," ",e.index," ",h.wc(3,5,"authentification.attempt")," ")}}const K=function(){return{delay:"300ms",x:"100%"}},P=function(e){return{value:"*",params:e}},U=function(){return["/forgot-password"]},D=function(e){return{email:e}},F=function(e){return{"sirh-disabled-btn":e}};let J=(()=>{class e{constructor(e,t,i,r,a,n,c,s,l,p){this.authService=e,this.route=t,this.router=i,this.authGuardService=r,this.refService=a,this.userService=n,this.recaptchaV3Service=c,this.snackBarService=s,this.translateService=l,this.fuseLoaderTranslateService=p,this.emailControl=new o.e("",[o.t.required,o.t.pattern("^[a-zA-Z0-9._%+-]+@(?:[a-zA-Z0-9-]+\\.)+[a-zA-Z]{2,}$")]),this.passwordControl=new o.e("",[o.t.required,o.t.minLength(8)]),this.hide=!0,this.fault=!0,this.rememberMeValue=!1,this.index=6,this.form=new o.h({email:this.emailControl,password:this.passwordControl})}ngOnDestroy(){this.singleExecutionSubscription&&this.singleExecutionSubscription.unsubscribe()}ngOnInit(){this.fuseLoaderTranslateService.loadTranslations(l.a,p.a)}changeRememberMe(e){this.rememberMeValue=e.checked}executeAction(e,t){this.singleExecutionSubscription&&this.singleExecutionSubscription.unsubscribe(),this.singleExecutionSubscription=this.recaptchaV3Service.execute(e).subscribe(e=>this.login(e))}login(e){if(this.form.valid){const t={username:this.form.get("email").value,password:this.form.get("password").value,rememberMe:this.rememberMeValue};this.authService.login(t,e).subscribe(e=>{this.authGuardService.checkRoles(e.access_token)?(s.a.setUser(e),s.a.setAuthToken(e.role),s.a.setAuthToken(e.access_token),this.authService.isConnected=!0,this.route.navigate([""])):this.snackBarService.showSnackBar(this.translateService.instant("authentification.unAuthorized"),this.snackBarService.errorSnackBarClass,!0)},e=>{this.index=this.index-1,this.authService.setAuthenticated(!1)})}}emailTrimer(){this.form.get("email").setValue(this.form.get("email").value.trim())}}return e.\u0275fac=function(t){return new(t||e)(h.cc(m.a),h.cc(n.g),h.cc(n.a),h.cc(d.a),h.cc(u.a),h.cc(g.a),h.cc(y),h.cc(B.a),h.cc(r.d),h.cc(E.a))},e.\u0275cmp=h.Wb({type:e,selectors:[["app-login"]],viewQuery:function(e,t){if(1&e&&h.hd(V,1),2&e){let e;h.Mc(e=h.rc())&&(t.recaptcha=e.first)}},decls:42,vars:42,consts:[["id","login","fxLayout","row","fxLayoutAlign","start",1,"inner-scroll"],["id","login-intro","fxFlex","","fxHide","","fxShow.gt-xs",""],["id","login-form-wrapper","fusePerfectScrollbar",""],["id","login-form"],["fxHide.gt-xs","",1,"logo"],["src","../../../../assets/images/logos/Calque 1.png","alt","Logo PORTAIL-EMPLOYE"],[1,"title"],["name","loginForm","novalidate","","autocomplete","off",3,"formGroup"],["appearance","outline"],["matInput","","formControlName","email",3,"input"],["matSuffix","",1,"secondary-text"],[4,"ngIf"],["matInput","","formControlName","password",3,"type"],["mat-icon-button","","matSuffix","",3,"click"],["class","mat-error",4,"ngIf"],["fxLayout","row","fxLayout.sm","column","fxLayout.xs","column","fxLayoutAlign","space-between center",1,"remember-forgot-password"],["aria-label","Remember Me",1,"remember-me",3,"change"],[1,"forgot-password",3,"routerLink","state"],["mat-raised-button","","aria-label","LOGIN",1,"submit-button","sirh-validate-btn",3,"disabled","ngClass","click"],[1,"mat-error"]],template:function(e,t){1&e&&(h.ic(0,"div",0),h.ic(1,"div",1),h.dc(2,"home-page"),h.hc(),h.ic(3,"div",2),h.ic(4,"div",3),h.ic(5,"div",4),h.dc(6,"img",5),h.hc(),h.ic(7,"div",6),h.bd(8),h.vc(9,"translate"),h.hc(),h.ic(10,"form",7),h.ic(11,"mat-form-field",8),h.ic(12,"mat-label"),h.bd(13),h.vc(14,"translate"),h.hc(),h.ic(15,"input",9),h.qc("input",function(){return t.emailTrimer()}),h.hc(),h.ic(16,"mat-icon",10),h.bd(17,"mail"),h.hc(),h.Zc(18,T,3,3,"mat-error",11),h.Zc(19,R,3,3,"mat-error",11),h.hc(),h.ic(20,"mat-form-field",8),h.ic(21,"mat-label"),h.bd(22),h.vc(23,"translate"),h.hc(),h.dc(24,"input",12),h.ic(25,"button",13),h.qc("click",function(){return t.hide=!t.hide}),h.ic(26,"mat-icon"),h.bd(27),h.hc(),h.hc(),h.Zc(28,Z,3,3,"mat-error",11),h.Zc(29,G,3,3,"mat-error",11),h.hc(),h.Zc(30,N,4,7,"mat-error",14),h.Zc(31,W,4,7,"mat-error",14),h.ic(32,"div",15),h.ic(33,"mat-checkbox",16),h.qc("change",function(e){return t.changeRememberMe(e)}),h.bd(34),h.vc(35,"translate"),h.hc(),h.ic(36,"a",17),h.bd(37),h.vc(38,"translate"),h.hc(),h.hc(),h.ic(39,"button",18),h.qc("click",function(e){return t.executeAction("login",e)}),h.bd(40),h.vc(41,"translate"),h.hc(),h.hc(),h.hc(),h.hc(),h.hc()),2&e&&(h.Qb(3),h.Bc("@animate",h.Ec(35,P,h.Dc(34,K))),h.Qb(5),h.cd(h.wc(9,22,"authentification.connect")),h.Qb(2),h.Bc("formGroup",t.form),h.Qb(3),h.cd(h.wc(14,24,"authentification.adress")),h.Qb(5),h.Bc("ngIf",t.emailControl.hasError("required")),h.Qb(1),h.Bc("ngIf",!t.emailControl.hasError("required")&&t.emailControl.hasError("pattern")),h.Qb(3),h.cd(h.wc(23,26,"authentification.pwd")),h.Qb(2),h.Bc("type",t.hide?"password":"text"),h.Qb(1),h.Rb("aria-label","Hide password")("aria-pressed",t.hide),h.Qb(2),h.cd(t.hide?"visibility_off":"visibility"),h.Qb(1),h.Bc("ngIf",t.passwordControl.hasError("required")),h.Qb(1),h.Bc("ngIf",!t.passwordControl.hasError("required")&&t.passwordControl.hasError("minlength")),h.Qb(1),h.Bc("ngIf",2===t.index),h.Qb(1),h.Bc("ngIf",1===t.index),h.Qb(3),h.dd(" ",h.wc(35,28,"authentification.rememberMe")," "),h.Qb(2),h.Bc("routerLink",h.Dc(37,U))("state",h.Ec(38,D,t.form.controls.email.value)),h.Qb(1),h.dd(" ",h.wc(38,30,"authentification.forgotPsw")," "),h.Qb(2),h.Bc("disabled",t.form.invalid)("ngClass",h.Ec(40,F,t.form.invalid)),h.Qb(1),h.dd(" ",h.wc(41,32,"authentification.getConnect")," "))},directives:[O.a,Q.c,Q.b,Q.a,L.b,C.a,_.a,o.u,o.p,o.i,A.c,A.g,q.b,o.c,o.o,o.g,z.a,A.h,b.n,M.b,I.a,n.i,b.k,L.a,A.b],pipes:[r.c],styles:["app-login{width:100%}app-login #login{width:100%;height:100%;overflow:hidden;background:url(/assets/images/backgrounds/dark-material-bg.jpg) no-repeat;background-size:cover}app-login #login #login-form-wrapper{width:400px;min-width:400px;max-width:400px;overflow:auto;-webkit-overflow-scrolling:touch;background:#fff;box-shadow:0 8px 10px -5px rgba(0,0,0,.2),0 16px 24px 2px rgba(0,0,0,.14),0 6px 30px 5px rgba(0,0,0,.12)}@media screen and (min-width:600px) and (max-width:959px){app-login #login #login-form-wrapper{width:360px;min-width:360px;max-width:360px}}@media screen and (max-width:599px){app-login #login #login-form-wrapper{width:100%;min-width:100%;max-width:100%}}app-login #login #login-form-wrapper #login-form{padding:48px;margin-top:30px}@media screen and (max-width:599px){app-login #login #login-form-wrapper #login-form{text-align:center;padding:24px}}app-login #login #login-form-wrapper #login-form .logo{width:128px;margin:32px auto}app-login #login #login-form-wrapper #login-form .title{font-size:21px;text-align:center;margin-bottom:15px}app-login #login #login-form-wrapper #login-form .description{padding-top:8px}app-login #login #login-form-wrapper #login-form form{width:100%;padding-top:32px}app-login #login #login-form-wrapper #login-form form mat-form-field{width:100%}@media screen and (max-width:599px){app-login #login #login-form-wrapper #login-form form mat-form-field{width:80%}}app-login #login #login-form-wrapper #login-form form mat-checkbox{margin:0}app-login #login #login-form-wrapper #login-form form .remember-forgot-password{font-size:13px;margin-top:8px}app-login #login #login-form-wrapper #login-form form .remember-forgot-password .remember-me{margin-bottom:16px}app-login #login #login-form-wrapper #login-form form .remember-forgot-password .forgot-password{font-size:13px;margin-bottom:11px}app-login #login #login-form-wrapper #login-form form .submit-button{width:100%;margin:16px auto;display:block}@media screen and (max-width:599px){app-login #login #login-form-wrapper #login-form form .submit-button{width:80%}}"],encapsulation:2,data:{animation:c.a}}),e})();var X=i("STbY"),H=i("AytR"),Y=i("jg9X");const $=H.a.reCaptcheKey,ee=[{path:"",component:J}];let te=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.ac({type:e}),e.\u0275inj=h.Zb({providers:[{provide:x,useValue:"fr"},{provide:k,useValue:$}],imports:[[n.j.forChild(ee),M.c,I.b,A.e,z.b,q.c,X.c,a.a,r.b,j,Y.a]]}),e})()}}]);